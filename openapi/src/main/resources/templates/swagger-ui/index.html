<!doctype html>
<html lang='en'>
    <head>
        <meta charset='UTF-8' />
        <title>{{title}}</title>
        <link rel='icon' type='image/png' href='https://unpkg.com/swagger-ui-dist{{swagger-ui.version}}/favicon-32x32.png' sizes='32x32' />
        <link rel='icon' type='image/png' href='https://unpkg.com/swagger-ui-dist{{swagger-ui.version}}/favicon-16x16.png' sizes='16x16' />
        <script src='https://unpkg.com/swagger-ui-dist{{swagger-ui.version}}/swagger-ui-bundle.js'></script>
        <script src='https://unpkg.com/swagger-ui-dist{{swagger-ui.version}}/swagger-ui-standalone-preset.js'></script>
        <link rel='stylesheet' type='text/css' href='https://unpkg.com/swagger-ui-dist{{swagger-ui.version}}/swagger-ui.css' />
        {{swagger-ui.theme}}
    </head>
    <body>
        <div id='swagger-ui'></div>
        <script>
            window.onload = function() {
                var d = decodeURIComponent,
                    contextPath = d(document.cookie.replace(/(?:(?:^|.*;\s*)contextPath\s*\=\s*([^;]*).*$)|^.*$/, "$1"));
                if (contextPath === '') {
                    const params = (function() {
                      var query = {},
                          a = window.location.search.substring(1).split('&'), pair;
                      for (var i = a.length - 1; i >= 0; i--) {
                        pair = a[i].split('=');
                        query[d(pair[0])] = d(pair[1] || '');
                      }
                      return query;
                    })();
                    contextPath = (params.contextPath && params.contextPath !== '' ? params.contextPath : '');
                }
                const ui = SwaggerUIBundle({
                      url: contextPath + '{{specURL}}',
                      dom_id: '#swagger-ui',
                      deepLinking: {{swagger-ui.deep-linking}},
                      validatorUrl: null,
                      presets: [
                          SwaggerUIBundle.presets.apis,
                          SwaggerUIStandalonePreset
                      ],
                      plugins: [
                          SwaggerUIBundle.plugins.DownloadUrl
                      ],
                      layout: '{{swagger-ui.layout}}'
                  });
                window.ui = ui;
                if (contextPath !== '') {
                    const location = window.location.origin + contextPath;
                    ui.getConfigs().requestInterceptor = req => {
                        if (req.url.startsWith(contextPath) && ! req.url.startsWith('http')) {
                            return req;
                        }
                        var idx = req.url.indexOf(location);
                        if (idx < 0) {
                            req.url = location + req.url.substring(window.location.origin.length);
                        }
                        return req;
                    };
                }
            }
        </script>
    </body>
</html>